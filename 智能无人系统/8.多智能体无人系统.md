# 多智能体控制概述

## 多智能体三要素

- 智能体
  - 组成系统的基本单元
- 行为规则
  - 智能体接收信息之后的反应规则
- 交互方式
  - 智能体之间的相互关系

## 多智能体协同控制关键技术

- 协同控制
  - 精确控制
  - 提供控制层保障
- 协同决策规划
  - 任务规划, 任务分配
  - 提供决策层保障
- 协同感知认知
  - 目标跟踪, 相对导航
  - 提供信息层保障
- 自组织交互网络构建
  - 数据通信, 信息交互
  - 提供交互层保障
- 群体智能理论基础
  - 机理机制
  - 提供理论层指导

# 图论及在多智能体控制中的应用

## 图论基础

在图论中, 用来描述事物或对象之间联系或相互作用状态的一个概念, 把它称为“图”

$$
G=\set{V,E}
$$

顶点集 $V$, 其元素称作顶点或结点 (vertex/node/point)

$$
V=\set{v_1,v_2,...,v_N}
$$

边集 $E$, 其元素称作边

$$
E=\set{e_1,e_2,...,e_N}
$$

有向图的弧集是有序对的多重集, 而无向图的边集是无序顶点对的多重集, 无向图的一切概念均可平移到有向图

### 边权

可以理解为两点之间的距离或费用

### 邻接矩阵

是表示顶点之间相邻关系的矩阵. 用一个一维数组存放图中所有顶点数据；用一个二维数组存放顶点间关系 (边或弧) 的数据

## 一致性

一致性 (agreement) 是多智能体协同 (multiagent coordination) 中的一个基础问题, 即使智能体间达成一种共同状态. 其核心目标是如何设计合适的控制协议或者机制使得网络中所有节点的状态能够达到一致

## 多智能体编队基本分类

- 基于位置的编队控制
  - 智能体感知自己相对于全局坐标系的位置. 它们主动控制自己的位置, 以实现所需的队形, 这是由相对于全局坐标系的所需位置规定的
- 基于位移的编队控制
  - 智能体主动控制其相邻智能体的位移以实现所需的队形, 这个队形是在假设每个智能体能够感知其相邻智能体相对于全局坐标系的相对位置的情况下, 由相对于全局坐标系的期望位移指定的
- 基于距离的编队控制
  - 主动控制智能体间距离, 以实现所需的编队, 这是由所需的智能体间距离给出的

## 队形变化策略

多智能体编队在进行编队避障时, 需要根据所处环境的约束, 进行实时有效的避障. **伸缩因子**是指多个智能体组成的队形维持现有形状不变, 只是在大小上实现伸缩的参数. 伸缩因子用符号 $\rho$ 表示,  $\rho \geq \rho_m$, 而 $\rho_m$ 表示**队形伸缩因子的阈值**. 利用伸缩因子来确定避障的队形变换模式指令, 伸缩因子计算式

$$
\rho=\frac{D_{max}}{D}
$$

$D$ 表示智能体小组队列的宽度,  $D_{max}$ 表示障碍环境下智能体小组运行路线的可通行路径的最大宽度

### 动态队形变化策略的模式

#### 零变换模式

$(\sigma=0)$ : 若 $\rho \geq 1$, 则 $D_{max}$, 表明编队中的智能体不需要改变现有队形即可通过障碍区

#### 同构变换模式

$(\sigma=1)$ : 若 $\rho < 1$ 且 $\rho \geq \rho_m$, 表明智能体编队不能直接通过障碍区, 但是可以压缩队形大小、不改变队形形状的方式通过障碍区

#### 异构变换模式

$(\sigma=2)$ : 当两种模式均不成立时, 即 $\rho < \rho_m$ 时, 表明只能破坏多智能体编队现有的队形, 才能通过障碍区

# 人工势场法及在多智能体控制中的应用

## 人工势场法

- 人工势场法的基本思想是在障碍物周围构建障碍物斥力势场, 在目标点周围构建引力势场, 类似于物理学中的电磁场
- 被控对象在这两种势场组成的复合场中受到斥力作用和引力作用, 斥力和引力的合力指引着被控对象的运动, 搜索无碰的避障路径
- 势场法是将障碍物比作是平原上具有高势能值的山峰, 而目标点则是具有低势能值的低谷

### 人工势场的缺点

- 当物体离目标点比较远时, 引力将变得特别大, 相对较小的斥力在可以忽略的情况下, 物体路径上可能会碰到障碍物
- 当目标点附近有障碍物时, 斥力将非常大, 引力相对较小, 物体很难到达目标点. 当小车与目标点距离很近时, 若目标点附近有障碍物, 此时小车所受引力相对于极大的斥力近似为 0, 小车将一直在目标点附近徘徊而无法到达目标点
- 在某个点, 引力和斥力刚好大小相等, 方向想反, 则物体容易陷入局部最优解或震荡, 发生“死锁”现象

### 改进措施

- 障碍物斥力场改进
  - 在经典 APF 的障碍物斥力场模型中, 将无人车与目标点间距离考虑进来, 使无人车在靠近目标点过程中, 斥力也逐渐减小至零
- 引入虚拟力
  - 当陷入局部极小值时, 可以用虚拟力进行逃离. 也可以采用随机的方法, 跳出局部极小值的状态
- 障碍物连锁网络结构
  - 当多个障碍物呈 U 型分布时, 无人车容易陷入局部极小值. 将近距离密集分布的多个障碍物连锁起来, 形成一个大障碍物, 进行大范围区域避障

## 各种编队控制方法的优缺点

| 编队控制方法 | 优点                             | 缺点                                   |
| ------------ | -------------------------------- | -------------------------------------- |
| 领航跟随法   | 只控制领航者即可控制编队         | 领航者出现故障则整个系统瘫痪           |
| 基于行为法   | 基本行为的组合实现编队功能多样化 | 难以进行理论论证, 不易稳定队形         |
| 虚拟结构法   | 编队整体决策容易, 稳定性比较好   | 无法考虑整体避障的问题                 |
| 基于图论法   | 便于队形的实现以及队形间的变换   | 理论研究居多, 物理实现较为复杂         |
| 人工势场法   | 有效解决避障                     | 存在局部最优点问题, 需要与其他方法结合 |
